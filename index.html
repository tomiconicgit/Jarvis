/* index.html -- <style> tag */

/* --- Base Layout & Theme (from Iconic) --- */
:root{
  --bg:#121212; --panel:#1E1E1E; --panel-border:#2A2A2A;
  --text:#F5F5F5; --muted:#888; --accent:#4da3ff; --toolbar:#1E1E1E; --input-bg:#252525;
  --panel-w:340px;
  --radius-sm: 4px;
  --radius-md: 0px;
  --safe-inset-bottom: env(safe-area-inset-bottom, 0px); /* Keep variable */
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);
  font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
  /* Prevent pull-to-refresh/overscroll issues */
  overscroll-behavior: none;
}
html,body,#viewport{overscroll-behavior:none}
canvas{display:block;width:100%;height:100%;touch-action:none}

/* --- MODIFIED --- */
.app{
  position:fixed;
  inset:0;
  display:grid;
  grid-template-rows:48px 1fr;
  /* Revert to simpler 100vh, modern browsers handle this better */
  height: 100vh;
  min-height:0; /* Keep this */
  /* Ensure app itself cannot overflow viewport */
  overflow: hidden;
}
/* --- END MODIFIED --- */

#toolbar{
  background:var(--toolbar);border-bottom:1px solid var(--panel-border);
  display:flex;align-items:center;gap:12px;padding:0 12px 0 16px;user-select:none
}
#toolbar .menu{
  font-weight:600;cursor:pointer;
  padding: 4px 8px; border-radius: var(--radius-sm);
}
#toolbar .menu:hover{background:rgba(255,255,255,.08)}

/* --- MODIFIED --- */
#main{
  display:grid;
  grid-template-columns:1fr var(--panel-w);
  min-height:0; /* Keep this */
  overflow: hidden; /* Keep this */
}
/* --- END MODIFIED --- */

#viewport{position:relative;min-height:0; overflow: hidden;} /* Added overflow hidden */

/* --- MODIFIED --- */
#panel{
  border-left:1px solid var(--panel-border);background:var(--panel);
  min-width:260px;display:flex;flex-direction:column;min-height:0;overflow:hidden;
  /* Padding handles the safe area */
  padding-bottom: var(--safe-inset-bottom);
}
/* --- END MODIFIED --- */

#panel-tabs{ display:flex; background:var(--bg); border-bottom:1px solid var(--panel-border); user-select:none; flex-shrink: 0; } /* Added flex-shrink: 0 */
.panel-tab{
  padding: 10px 16px; font-weight:600; cursor:pointer;
  opacity:.5; border-bottom:2px solid transparent;
}
.panel-tab.active{ opacity:1; border-bottom-color:var(--accent); }
.panel-tab:hover{ background:rgba(255,255,255,.03); }

/* --- PANEL SCROLLING FIX --- */
/* --- MODIFIED --- */
.panel-pane{
  display:none;
  flex:1;
  min-height:0;
  overflow-y:auto; /* Allow vertical scroll */
  overflow-x:hidden;
  padding:12px;
  /* Ensure padding doesn't get cut off */
  padding-bottom: calc(12px + var(--safe-inset-bottom)); /* Add safe area padding INSIDE scroll area */
}
/* --- END MODIFIED --- */
.panel-pane.active{ display:block; }

@media (max-width:768px){
  :root{ --panel-w: auto; }
  /* --- MODIFIED --- */
  #main{
    grid-template-columns:1fr; /* Single column */
    /* Define rows more simply: viewport gets remaining space, panel gets its content height */
    /* Using 60%/40% can be more stable than minmax/auto sometimes */
    grid-template-rows: 60% 40%;
  }
  /* --- END MODIFIED --- */
  #panel{
    border-left:none;
    border-top:1px solid var(--panel-border);
    /* Ensure panel doesn't try to shrink below content height */
    flex-shrink: 0;
  }
}

/* ... keep the rest of your styles (.group, .list, .item, .row, inputs, buttons, .hud, .zoom-slider, #loader etc.) ... */

/* Make sure zoom slider respects safe area */
.zoom-slider {
  position: absolute;
  left: 10px;
  bottom: 10px;
  bottom: calc(10px + var(--safe-inset-bottom)); /* Adjust for safe area */
  width: 200px;
  z-index: 10;
  accent-color: var(--accent);
  opacity: 0.7;
  transition: opacity 0.15s;
}
.zoom-slider:hover {
  opacity: 1;
}

